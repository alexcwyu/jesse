import{g as M,r as m,h as _,bi as h,bE as E,i as l,aQ as f,be as k,c as y,o as B,B as C,l as b}from"./DJFabWt2.js";const x=M({__name:"MonacoEditor.client",props:{lang:{default:()=>"plaintext"},options:{default:()=>({})},modelValue:{default:()=>""}},emits:["update:modelValue","load"],setup(V,{expose:g,emit:v}){const a=V,n=v,u=m(!0),d=_(()=>a.lang||a.options.language),c=h(),t=m(),s=E(),i={automaticLayout:!0};let e,o;return l(()=>a.modelValue,()=>{(e==null?void 0:e.getValue())!==a.modelValue&&(e==null||e.setValue(a.modelValue))}),l(()=>a.lang,()=>{o&&o.dispose(),o=s.editor.createModel(a.modelValue,d.value),e==null||e.setModel(o)}),l(()=>a.options,()=>{e==null||e.updateOptions(f(a.options,i))}),l(t,(p,r)=>{!t.value||r||(e=s.editor.create(t.value,f(a.options,i)),o=s.editor.createModel(a.modelValue,d.value),c.value=e,e.layout(),e.setModel(o),e.onDidChangeModelContent(()=>{n("update:modelValue",e.getValue())}),u.value=!1,n("load",e))}),g({$editor:c}),k(()=>{e==null||e.dispose(),o==null||o.dispose()}),(p,r)=>(B(),y("div",{ref_key:"editorElement",ref:t},[u.value?C(p.$slots,"default",{key:0}):b("",!0)],512))}});export{x as _};
